â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   RSDE Helm Chart å¿«é€Ÿå‚è€ƒå¡                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ é¡¹ç›®ä¿¡æ¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Chart åç§°:    rsde
  ç‰ˆæœ¬:          0.1.0
  å‘½åç©ºé—´:      xy
  åº”ç”¨ç«¯å£:      3000

ğŸš€ å¿«é€Ÿå‘½ä»¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  éªŒè¯ Chart:     make helm-validate
  å®‰è£…éƒ¨ç½²:       make helm-install
  æŸ¥çœ‹çŠ¶æ€:       make helm-status
  å‡çº§éƒ¨ç½²:       make helm-upgrade
  å¸è½½åˆ é™¤:       make helm-uninstall

ğŸ“ éƒ¨ç½²è„šæœ¬
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  åŸºæœ¬å®‰è£…:       ./helm/deploy.sh
  è‡ªå®šä¹‰é…ç½®:     ./helm/deploy.sh -f my-values.yaml
  å‡çº§éƒ¨ç½²:       ./helm/deploy.sh --upgrade
  æŸ¥çœ‹çŠ¶æ€:       ./helm/deploy.sh --status
  å¸è½½æœåŠ¡:       ./helm/deploy.sh --uninstall
  å¸®åŠ©ä¿¡æ¯:       ./helm/deploy.sh --help

âš™ï¸ Helm åŸç”Ÿå‘½ä»¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å®‰è£…:
  $ helm install rsde ./helm/rsde -n xy --create-namespace

  ä½¿ç”¨è‡ªå®šä¹‰é…ç½®:
  $ helm install rsde ./helm/rsde -n xy -f my-values.yaml

  å‡çº§:
  $ helm upgrade rsde ./helm/rsde -n xy

  æŸ¥çœ‹:
  $ helm list -n xy
  $ helm status rsde -n xy
  $ helm get values rsde -n xy

  å¸è½½:
  $ helm uninstall rsde -n xy

ğŸ” Kubernetes å‘½ä»¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  æŸ¥çœ‹èµ„æº:
  $ kubectl get all -n xy
  $ kubectl get pods -n xy
  $ kubectl get svc -n xy
  $ kubectl get configmap -n xy
  $ kubectl get pvc -n xy

  æŸ¥çœ‹æ—¥å¿—:
  $ kubectl logs -n xy -l app.kubernetes.io/name=rsde -f

  è¿›å…¥å®¹å™¨:
  $ kubectl exec -n xy -it <pod-name> -- sh

  ç«¯å£è½¬å‘:
  $ kubectl port-forward -n xy svc/rsde-rsde 8765:3000

  é‡å¯æœåŠ¡:
  $ kubectl rollout restart deployment -n xy rsde-rsde

  æŸ¥çœ‹äº‹ä»¶:
  $ kubectl get events -n xy --sort-by='.lastTimestamp'

ğŸŒ è®¿é—®æœåŠ¡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ClusterIP (é›†ç¾¤å†…):
  http://rsde-rsde.xy.svc.cluster.local:3000

  Port Forward (æœ¬åœ°):
  kubectl port-forward -n xy svc/rsde-rsde 8765:3000
  http://localhost:8765

  NodePort (å¤–éƒ¨):
  http://<node-ip>:<nodePort>

  å‰ç«¯é¡µé¢:
  /                 - é¦–é¡µ
  /rsync           - Rsync å·¥å…·
  /rc              - RC å·¥å…·
  /ocr             - OCR è¯†åˆ«
  /anybox          - Anybox æ–‡æœ¬åˆ†äº«

  API ç«¯ç‚¹:
  /api/anybox/health              - å¥åº·æ£€æŸ¥
  /api/anybox/textbox             - æ–‡æœ¬æ“ä½œ
  /api/image/upload               - å›¾ç‰‡ä¸Šä¼ 
  /api/ocr/recognize              - OCR è¯†åˆ«

ğŸ“‹ å¿…éœ€é…ç½®é¡¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  åœ¨éƒ¨ç½²å‰å¿…é¡»ä¿®æ”¹ my-values.yaml:

  1. é•œåƒé…ç½®:
     image:
       repository: your-registry.com/rsde-apiserver
       tag: "v0.1.0"

  2. Redis é…ç½®:
     config:
       anybox:
         redis_url: "redis://:password@redis-host:6379/0"

  3. (å¯é€‰) é•œåƒæ‹‰å–å¯†é’¥:
     imagePullSecrets:
       - name: regcred

ğŸ“š æ–‡æ¡£å¯¼èˆª
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å¿«é€Ÿå…¥é—¨:       helm/QUICKSTART.md
  å®Œæ•´æŒ‡å—:       helm/README.md
  Chart æ–‡æ¡£:     helm/rsde/README.md
  é…ç½®ç¤ºä¾‹:       helm/rsde/values-example.yaml
  éƒ¨ç½²æ€»ç»“:       helm/DEPLOYMENT_SUMMARY.md

ğŸ”§ æ•…éšœæ’æŸ¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Pod æ— æ³•å¯åŠ¨:
  $ kubectl describe pod -n xy <pod-name>
  $ kubectl logs -n xy <pod-name>

  é…ç½®é—®é¢˜:
  $ kubectl get configmap -n xy rsde-rsde-config -o yaml
  $ kubectl exec -n xy -it <pod-name> -- cat /etc/rsde/config.toml

  å­˜å‚¨é—®é¢˜:
  $ kubectl get pvc -n xy
  $ kubectl describe pvc -n xy rsde-rsde-uploads

  ç½‘ç»œé—®é¢˜:
  $ kubectl get svc -n xy
  $ kubectl get endpoints -n xy rsde-rsde

  Redis è¿æ¥:
  $ kubectl exec -n xy -it <pod-name> -- sh
  # åœ¨å®¹å™¨å†…æµ‹è¯• Redis è¿æ¥

âœ… éªŒè¯éƒ¨ç½²
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1. æ£€æŸ¥ Pod çŠ¶æ€:
     $ kubectl get pods -n xy
     çŠ¶æ€åº”ä¸º: Running, READY 1/1

  2. æµ‹è¯•å¥åº·æ£€æŸ¥:
     $ kubectl exec -n xy -it <pod-name> -- \
       wget -O- http://localhost:3000/api/anybox/health
     åº”è¿”å›: {"success":true,"data":{"status":"healthy"}}

  3. è®¿é—®å‰ç«¯:
     $ kubectl port-forward -n xy svc/rsde-rsde 8765:3000
     æµè§ˆå™¨è®¿é—®: http://localhost:8765

ğŸ¯ å¸¸è§åœºæ™¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ä¿®æ”¹é…ç½®å¹¶é‡å¯:
  $ vim my-values.yaml
  $ helm upgrade rsde ./helm/rsde -n xy -f my-values.yaml
  $ kubectl rollout status deployment -n xy rsde-rsde

  æŸ¥çœ‹éƒ¨ç½²å†å²:
  $ helm history rsde -n xy

  å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬:
  $ helm rollback rsde -n xy

  å¯¼å‡ºå½“å‰é…ç½®:
  $ helm get values rsde -n xy > current-values.yaml

  å®Œå…¨é‡æ–°éƒ¨ç½²:
  $ helm uninstall rsde -n xy
  $ helm install rsde ./helm/rsde -n xy -f my-values.yaml

ğŸ’¡ æœ€ä½³å®è·µ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ“ ä½¿ç”¨æ˜ç¡®çš„é•œåƒæ ‡ç­¾ï¼Œé¿å… latest
  âœ“ è®¾ç½®åˆç†çš„èµ„æºé™åˆ¶
  âœ“ å¯ç”¨æŒä¹…åŒ–å­˜å‚¨
  âœ“ å®šæœŸå¤‡ä»½ ConfigMap å’Œ PVC
  âœ“ ä½¿ç”¨ values æ–‡ä»¶ç®¡ç†é…ç½®
  âœ“ æµ‹è¯•åå†å‡çº§ç”Ÿäº§ç¯å¢ƒ
  âœ“ ç›‘æ§æ—¥å¿—å’Œèµ„æºä½¿ç”¨

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 æ›´å¤šä¿¡æ¯: https://github.com/abrance/rsde
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
